var AFFIRM_AFFIRM=AFFIRM_AFFIRM||{};(function(AFFIRM_AFFIRM){'use strict';AFFIRM_AFFIRM.promos=AFFIRM_AFFIRM.promos||{};AFFIRM_AFFIRM.promos={isInitialized:false,isLoaded:false,isALAInitialized:false,configurableOptions:{},isConfigurableOptionsInitialized:false,isDBPromoConfigurableInitialized:false,deBounceUpdatePromoConfigurable:{},config:{},REQUEST_CONFIGURABLE_DELAY:1200,initialize:function(apiKey,affirmJsUrl,sessionId){sessionId=(typeof sessionId!=='undefined')?sessionId:'null';this.config={public_api_key:apiKey,script:affirmJsUrl,session_id:sessionId};this.setIsInitialized(true);return this;},loadScript:function(){(function(l,g,m,e,a,f,b){var d,c=l[m]||{},h=document.createElement(f),n=document.getElementsByTagName(f)[0],k=function(a,b,c){return function(){a[b]._.push([c,arguments])}};c[e]=k(c,e,"set");d=c[e];c[a]={};c[a]._=[];d._=[];c[a][b]=k(c,a,b);a=0;for(b="set add save post open empty reset on off trigger ready setProduct".split(" ");a<b.length;a++)d[b[a]]=k(c,e,b[a]);a=0;for(b=["get","token","url","items"];a<b.length;a++)d[b[a]]=function(){};h.async=!0;h.src=g[f];n.parentNode.insertBefore(h,n);delete g[f];d(g);l[m]=c})(window,this.config,"affirm","checkout","ui","script","ready");this.setIsLoaded(true);return this;},setIsLoaded:function(flag){this.isLoaded=flag;return this;},getIsScriptLoaded:function(){return this.isLoaded;},setIsInitialized:function(flag){this.isInitialized=flag;return this;},getIsInitialized:function(){return this.isInitialized;},getIsAsLowAsInitialized:function(){return this.isALAInitialized;},updatePromoBlocksVisibility:function(visibility){var asLowAs=document.getElementById('learn-more');if(asLowAs){asLowAs.style.visibility=visibility;}
var promoBanners=document.getElementsByClassName('affirm-promo');if(promoBanners[0]){promoBanners[0].style.visibility=visibility;}
return true;},initConfigurableOptions:function(configurableInfo){this.configurableOptions=configurableInfo;this.isConfigurableOptionsInitialized=true;return this;},getIsConfigurableOptionsInitialized:function(){return this.isConfigurableOptionsInitialized;},hidePromoForConfigurableBackOrdered:function(){var selectedSimpleOptions={},productId,key,productProperties,productSelected;$$('select.super-attribute-select').each(function(item,index){selectedSimpleOptions[item.attributeId]=item.value;});for(productId in this.configurableOptions){productSelected=true;productProperties=this.configurableOptions[productId];for(key in selectedSimpleOptions){if(productProperties[key]!=selectedSimpleOptions[key]){productSelected=false;}}
if(productSelected&&productProperties.backorders){this.updatePromoBlocksVisibility('hidden');return true;}}
return false;},deBounce:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow,later;later=function(){timeout=null;if(!immediate){func.apply(context,args);}};callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};},getDeBouncedPromoUpdateConfigurable:function(){if(!this.isDBPromoConfigurableInitialized){this.deBounceUpdatePromoConfigurable=this.deBounce(this.hidePromoForConfigurableBackOrdered,this.REQUEST_CONFIGURABLE_DELAY,false).bind(this);this.isDBPromoConfigurableInitialized=true;}
return this.deBounceUpdatePromoConfigurable;}};})(AFFIRM_AFFIRM);if((typeof Product!='undefined')&&(typeof Product.OptionsPrice!='undefined')&&(typeof Product.OptionsPrice.prototype.reload!='undefined')){Product.OptionsPrice.prototype.reload=Product.OptionsPrice.prototype.reload.wrap(function(reload){reload();if(AFFIRM_AFFIRM.promos.getIsAsLowAsInitialized()){var deBounceUpdateAsLowAs,container=$(this.containers[0]);deBounceUpdateAsLowAs=AFFIRM_AFFIRM.promos.getDeBouncedAsLowAs();deBounceUpdateAsLowAs(0,true,container,this.priceFormat);}
if(AFFIRM_AFFIRM.promos.getIsConfigurableOptionsInitialized()){var deBounceUpdatePromoConfigurable;deBounceUpdatePromoConfigurable=AFFIRM_AFFIRM.promos.getDeBouncedPromoUpdateConfigurable();if(!deBounceUpdatePromoConfigurable()){AFFIRM_AFFIRM.promos.updatePromoBlocksVisibility('visible');}}});}